<form [formGroup]="activityForm" (ngSubmit)="logActivity()" class="form-container">
  
  <!-- Activity Dropdown with Custom Option -->
  <div class="form-group">
    <label for="activity">Activity</label>
    <select id="activity" class="form-control" formControlName="activity" (change)="checkActivity($event)" [class.is-invalid]="activityForm.get('activity')?.touched && activityForm.get('activity')?.invalid">
      <option *ngFor="let option of activities" [value]="option">{{ option }}</option>
      <option value="Other">Other</option>
    </select>
    <!-- Display error if activity is not selected -->
    <div *ngIf="activityForm.get('activity')?.touched && activityForm.get('activity')?.invalid" class="invalid-feedback">
      Activity is required.
    </div>

    <!-- Custom Activity Input -->
    <div *ngIf="showCustomActivity">
      <label for="customActivity">Custom Activity</label>
      <input id="customActivity" class="form-control" formControlName="customActivity" placeholder="Enter custom activity" />
    </div>
  </div>

  <!-- Category Dropdown with Custom Option -->
  <div class="form-group">
    <label for="category">Category</label>
    <select id="category" class="form-control" formControlName="category" (change)="checkCategory($event)" [class.is-invalid]="activityForm.get('category')?.touched && activityForm.get('category')?.invalid">
      <option *ngFor="let option of categories" [value]="option">{{ option }}</option>
      <option value="Other">Other</option>
    </select>
    <!-- Display error if category is not selected -->
    <div *ngIf="activityForm.get('category')?.touched && activityForm.get('category')?.invalid" class="invalid-feedback">
      Category is required.
    </div>

    <!-- Custom Category Input -->
    <div *ngIf="showCustomCategory">
      <label for="customCategory">Custom Category</label>
      <input id="customCategory" class="form-control" formControlName="customCategory" placeholder="Enter custom category" />
    </div>
  </div>

  <!-- Start Date/Time Field -->
<div class="form-group">
  <label for="activityStartDateTime">Start:</label>
  <input 
    id="activityStartDateTime" 
    class="form-control" 
    formControlName="activityStartDateTime" 
    type="datetime-local" 
    [class.is-invalid]="activityForm.get('activityStartDateTime')?.touched && activityForm.get('activityStartDateTime')?.invalid" 
  />
  <!-- Display error if start date/time is not selected -->
  <div *ngIf="activityForm.get('activityStartDateTime')?.touched && activityForm.get('activityStartDateTime')?.invalid" class="invalid-feedback">
    Start date/time is required.
  </div>
</div>

<!-- End Date/Time Field -->
<div class="form-group">
  <label for="activityEndDateTime">End:</label>
  <input 
    id="activityEndDateTime" 
    class="form-control" 
    formControlName="activityEndDateTime" 
    type="datetime-local" 
    [class.is-invalid]="activityForm.get('activityEndDateTime')?.touched && activityForm.get('activityEndDateTime')?.invalid" 
  />
  <!-- Display error if end date/time is not selected -->
  <div *ngIf="activityForm.get('activityEndDateTime')?.touched && activityForm.get('activityEndDateTime')?.invalid" class="invalid-feedback">
    End date/time is required.
  </div>
</div>

  <!-- Optional Description Field -->
  <div class="form-group">
    <label for="description">Description (Optional)</label>
    <textarea id="description" class="form-control" formControlName="description" rows="3" placeholder="Add any extra details..."></textarea>
  </div>

  <!-- Color Picker Field -->
  <div class="form-group">
    <label for="color">Color (Optional)</label>
    <input id="color" class="form-control" type="color" formControlName="color" />
  </div>

  <div *ngIf="showSuccessMessage" class="alert alert-success" role="alert">
    Activity logged successfully!
  </div>  

  <button type="submit" class="btn btn-primary mt-3" [disabled]="activityForm.invalid">Log Activity</button>
</form>
