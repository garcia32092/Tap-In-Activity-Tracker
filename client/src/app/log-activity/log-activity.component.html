<h2>Log Activity</h2>
<form [formGroup]="activityForm" (ngSubmit)="logActivity()" class="form-container">
  
  <!-- Activity Dropdown with Custom Option -->
  <div class="form-group">
    <label for="activity">Activity</label>
    <select id="activity" class="form-control" formControlName="activity" (change)="checkActivity($event)" [class.is-invalid]="activityForm.get('activity')?.touched && activityForm.get('activity')?.invalid">
      <option *ngFor="let option of activities" [value]="option">{{ option }}</option>
      <option value="Other">Other</option>
    </select>
    <!-- Display error if activity is not selected -->
    <div *ngIf="activityForm.get('activity')?.touched && activityForm.get('activity')?.invalid" class="invalid-feedback">
      Activity is required.
    </div>

    <!-- Custom Activity Input -->
    <div *ngIf="showCustomActivity">
      <label for="customActivity">Custom Activity</label>
      <input id="customActivity" class="form-control" formControlName="customActivity" placeholder="Enter custom activity" />
    </div>
  </div>

  <!-- Category Dropdown with Custom Option -->
  <div class="form-group">
    <label for="category">Category</label>
    <select id="category" class="form-control" formControlName="category" (change)="checkCategory($event)" [class.is-invalid]="activityForm.get('category')?.touched && activityForm.get('category')?.invalid">
      <option *ngFor="let option of categories" [value]="option">{{ option }}</option>
      <option value="Other">Other</option>
    </select>
    <!-- Display error if category is not selected -->
    <div *ngIf="activityForm.get('category')?.touched && activityForm.get('category')?.invalid" class="invalid-feedback">
      Category is required.
    </div>

    <!-- Custom Category Input -->
    <div *ngIf="showCustomCategory">
      <label for="customCategory">Custom Category</label>
      <input id="customCategory" class="form-control" formControlName="customCategory" placeholder="Enter custom category" />
    </div>
  </div>

  <!-- Date Field -->
  <div class="form-group">
    <label for="activityDate">Date</label>
    <input id="activityDate" class="form-control" formControlName="activityDate" type="date" [class.is-invalid]="activityForm.get('activityDate')?.touched && activityForm.get('activityDate')?.invalid">
    <!-- Display error if date is not selected -->
    <div *ngIf="activityForm.get('activityDate')?.touched && activityForm.get('activityDate')?.invalid" class="invalid-feedback">
      Date is required.
    </div>
  </div>

  <!-- Start and End Time Fields -->
  <div class="form-group">
    <label for="start">Start Time</label>
    <input id="start" class="form-control" formControlName="start" type="time" required />
  </div>

  <div class="form-group">
    <label for="end">End Time</label>
    <input id="end" class="form-control" formControlName="end" type="time" required />
  </div>

  <!-- Optional Description Field -->
  <div class="form-group">
    <label for="description">Description (Optional)</label>
    <textarea id="description" class="form-control" formControlName="description" rows="3" placeholder="Add any extra details..."></textarea>
  </div>

  <div *ngIf="showSuccessMessage" class="alert alert-success" role="alert">
    Activity logged successfully!
  </div>  

  <button type="submit" class="btn btn-primary mt-3" [disabled]="activityForm.invalid">Log Activity</button>
</form>
